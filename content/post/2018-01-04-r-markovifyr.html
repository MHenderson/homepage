---
title: "MarkovifyR"
author: "Matthew Henderson"
date: "2018-01-04T20:33:50+00:00"
categories: ["R"]
tags: ["markovify"]
---



<div id="markovifyr" class="section level1">
<h1>MarkovifyR</h1>
<p>This post is all about the R package <a href="https://github.com/abresler/markovifyR"><strong>markovifyR</strong></a> by
Alex Bresler.</p>
<p>Let’s use Whitman’s <em>Leaves of Grass</em> as a starting point.</p>
<pre class="r"><code>library(gutenbergr)

leaves_of_grass &lt;- gutenberg_download(&quot;1322&quot;)</code></pre>
<pre class="r"><code>library(tidyverse)
library(tidytext)

(tidyleaves &lt;- tibble(txt = leaves_of_grass$text) %&gt;%
  unnest_tokens(sentence, txt, token = &quot;sentences&quot;))
#&gt; # A tibble: 3,838 x 1
#&gt;    sentence                                                                     
#&gt;    &lt;chr&gt;                                                                        
#&gt;  1 leaves of grass  by walt whitman         come, said my soul,      such verse…
#&gt;  2 inscriptions     one&#39;s-self i sing    one&#39;s-self i sing, a simple separate p…
#&gt;  3 of physiology from top to toe i sing,   not physiognomy alone nor brain alon…
#&gt;  4 of life immense in passion, pulse, and power,   cheerful, for freest action …
#&gt;  5 as i ponder&#39;d in silence    as i ponder&#39;d in silence,   returning upon my po…
#&gt;  6 it said,   know&#39;st thou not there is but one theme for ever-enduring bards?  
#&gt;  7 and that is the theme of war, the fortune of battles,   the making of perfec…
#&gt;  8 be it so, then i answer&#39;d,   i too haughty shade also sing war, and a longer…
#&gt;  9 in cabin&#39;d ships at sea    in cabin&#39;d ships at sea,   the boundless blue on …
#&gt; 10 here are our thoughts, voyagers&#39; thoughts,   here not the land, firm land, a…
#&gt; # … with 3,828 more rows</code></pre>
<pre class="r"><code>library(markovifyR)

markov_model &lt;-
  generate_markovify_model(
    input_text = tidyleaves %&gt;% pull(sentence),
    markov_state_size = 2L,
    max_overlap_total = 5,
    max_overlap_ratio = .4
  )</code></pre>
<pre class="r"><code>results &lt;- markovify_text(
  markov_model = markov_model,
  maximum_sentence_length = NULL,
  output_column_name = &#39;waltWhitman&#39;,
  count = 5,
  tries = 300,
  only_distinct = TRUE,
  return_message = FALSE
)</code></pre>
<pre class="r"><code>library(glue)
library(htmltools)

results %&gt;%
  glue_data(&quot;{waltWhitman}&quot;) %&gt;%
  glue_collapse(sep = &quot; &quot;) %&gt;%
  tags$p()</code></pre>
<p>not for the future, and i swear to you finding the sweetest, wisest soul of me! spring to your use out of their flesh against me it shall be to the last. this is a face for a little house alone more than all that retrospection, to think that these are the shadows of leaves. and if those who remain behind you, to remain, the real i myself, in all men. 46 i know not, it is not pathetic, has no taste of the dead young men o kings!</p>
</div>
