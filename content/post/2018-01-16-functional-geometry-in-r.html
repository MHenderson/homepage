---
title: Functional Geometry in R
author: Matthew Henderson
date: '2018-01-16'
slug: functional-geometry-in-r
categories:
  - R
tags:
  - packages
  - fun
  - generative-art
---



<p>This post introduces
<strong>funcgeo</strong>,
an R package
for functional geometry,
by recreating Square Limit
by M. Escher
(Fig. 1)
following the approach of
<span class="citation">@Henderson:1982:FG</span>.</p>
<div class="figure"><span id="fig:squarelimit"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/squarelimit-1.png" alt="Square Limit" width="480" />
<p class="caption">
Figure 1: Square Limit
</p>
</div>
<p>Peter Henderson describes
Functional Geometry in two papers:
<span class="citation">@Henderson:1982:FG</span>
and
<span class="citation">@Henderson:2002:FG</span>.
In those papers
he shows
how to define
a language of pictures
using basic concepts
of functional programming.</p>
<p><a href="https://mhenderson.github.io/funcgeo/"><strong>funcgeo</strong></a>
implements a picture language
like the one described in
<span class="citation">@Henderson:1982:FG</span>.</p>
<p>To install
<strong>funcgeo</strong>
use <code>install_gitlab</code> from
the <strong>remotes</strong> package.</p>
<pre class="r"><code>#install.packages(&quot;remotes&quot;)
remotes::install_gitlab(&quot;MHenderson1/funcgeo&quot;)</code></pre>
<p>The next section
introduces the basic fish pictures
used to construct Square Limit.</p>
<p>After that,
in subsequent sections,
the fish
are combined into
more complex pictures
where the lines of the fish
are connected
at picture boundaries.
The penultimate step
before constructing
the complete Square Limit picture
is to combine the complex pictures
into the sides
and corners
of Square Limit.</p>
<div id="fish" class="section level1">
<h1>Fish</h1>
<p>The fish from
<span class="citation">@Henderson:1982:FG</span>
are available in <strong>funcgeo</strong>
as package data:
<code>fish_p</code>,
<code>fish_q</code>,
<code>fish_r</code>
and
<code>fish_s</code>.
All fish
have class <code>picture</code>
and <strong>funcgeo</strong> implements
a <code>plot</code> method for
<code>picture</code>s.</p>
<pre class="r"><code>library(funcgeo)

plot(fish_p)</code></pre>
<div class="figure"><span id="fig:p"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/p-1.png" alt="Fish P" width="192" />
<p class="caption">
Figure 2: Fish P
</p>
</div>
<pre class="r"><code>plot(fish_q)</code></pre>
<div class="figure"><span id="fig:q"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/q-1.png" alt="Fish Q" width="192" />
<p class="caption">
Figure 3: Fish Q
</p>
</div>
</div>
<div id="combining-fish" class="section level1">
<h1>Combining fish</h1>
<p>Picture operations from
<span class="citation">@Henderson:1982:FG</span>
like <code>rot</code>, <code>flip</code>
and <code>cycle</code>
are implemented in <strong>funcgeo</strong>.</p>
<p>For example,
the <code>quartet</code> operation
described in <span class="citation">@Henderson:1982:FG</span>
is used to combine
the four fish
into <code>t</code>,
one of the building blocks
of Square Limit.</p>
<pre class="r"><code>t &lt;- quartet(fish_p, fish_q, fish_r, fish_s)

plot(t)</code></pre>
<div class="figure"><span id="fig:t"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/t-1.png" alt="t" width="288" />
<p class="caption">
Figure 4: t
</p>
</div>
<p>Similarly,
<code>cycle</code>
and <code>rot</code>
functions
are used to create
<code>u</code> from <code>fish_q</code>.</p>
<pre class="r"><code>u &lt;- cycle(rot(fish_q))

plot(u)</code></pre>
<div class="figure"><span id="fig:u"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/u-1.png" alt="u" width="288" />
<p class="caption">
Figure 5: u
</p>
</div>
</div>
<div id="sides" class="section level1">
<h1>Sides</h1>
<p><code>quartet</code>
is also required
for building <code>side1</code>,
one of the more complex
pieces of Square Limit.
<code>side1</code> also requires
the <code>rot</code> operation
and <code>nil</code> empty picture.</p>
<pre class="r"><code>side1 &lt;- quartet(nil, nil, rot(t), t)

plot(side1)</code></pre>
<div class="figure"><span id="fig:side1"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/side1-1.png" alt="Side 1" width="288" />
<p class="caption">
Figure 6: Side 1
</p>
</div>
<p><code>side2</code> is created
as a <code>quartet</code>
involving several pictures,
including <code>side1</code>.</p>
<pre class="r"><code>side2 &lt;- quartet(side1, side1, rot(t), t)

plot(side2)</code></pre>
<div class="figure"><span id="fig:side2"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/side2-1.png" alt="Side 2" width="288" />
<p class="caption">
Figure 7: Side 2
</p>
</div>
</div>
<div id="corners" class="section level1">
<h1>Corners</h1>
<p>The goal
of this section
is to reproduce
<code>corner</code> from
<span class="citation">@Henderson:1982:FG</span>.
Square Limit is created
by calling the <code>cycle</code> operation
on <code>corner</code>.
However,
creating <code>corner</code>
requires first creating
<code>corner2</code>,
which itself is based
on <code>corner1</code>
which is a <code>quartet</code>
of three null pictures
and <code>u</code>.</p>
<pre class="r"><code>corner1 &lt;- quartet(nil, nil, nil, u)

plot(corner1)</code></pre>
<div class="figure"><span id="fig:corner1"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/corner1-1.png" alt="Corner 1" width="288" />
<p class="caption">
Figure 8: Corner 1
</p>
</div>
<p><code>corner2</code> is also
a <code>quartet</code>
made from <code>corner1</code>
<code>side1</code>
and <code>u</code>.</p>
<pre class="r"><code>corner2 &lt;- quartet(corner1, side1, rot(side1), u)

plot(corner2)</code></pre>
<div class="figure"><span id="fig:corner2"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/corner2-1.png" alt="Corner 2" width="288" />
<p class="caption">
Figure 9: Corner 2
</p>
</div>
<p><code>nonet</code> is a
<span class="math inline">\(3 \times 3\)</span>
equivalent of <code>quartet</code>
and is used
with <code>corner2</code>
<code>side2</code>,
<code>u</code>,
<code>t</code>,
and <code>fish_q</code>
to create <code>corner</code>,
the only picture
we need to create
Square Limit.</p>
<pre class="r"><code>corner &lt;- nonet(
  corner2, side2, side2,
  rot(side2), u, rot(t),
  rot(side2), rot(t), rot(fish_q)
)

plot(corner)</code></pre>
<div class="figure"><span id="fig:corner"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/corner-1.png" alt="Corner" width="288" />
<p class="caption">
Figure 10: Corner
</p>
</div>
</div>
<div id="square-limit" class="section level1">
<h1>Square Limit</h1>
<p>Square Limit now is
just <code>cycle</code>
with <code>corner</code>.</p>
<pre class="r"><code>squarelimit &lt;- cycle(corner)

plot(squarelimit)</code></pre>
<div class="figure"><span id="fig:squarelimit2"></span>
<img src="/post/2018-01-16-functional-geometry-in-r_files/figure-html/squarelimit2-1.png" alt="Square Limit" width="480" />
<p class="caption">
Figure 11: Square Limit
</p>
</div>
</div>
